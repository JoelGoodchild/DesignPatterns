#include "Splash.h"
#include "Texture.h"
#include "Input.h"
#include "StateMachine.h"
#include <assert.h>
//---------------------------------------------------------------------------------------
Splash::Splash()
{
	//---------------------------------------------------------------------------------------
	//Creates all sprites for the splash state 
	//And asserts to ensure they are created successfully
	//---------------------------------------------------------------------------------------
	sprite1 = new Texture("./textures/splash.png");
	assert(sprite1);
	sprite2 = new Texture("./textures/splash2.png");
	assert(sprite2);
	
	//---------------------------------------------------------------------------------------
	//Variable to set the opacity of the sprites
	//---------------------------------------------------------------------------------------
	x = 0;

	//---------------------------------------------------------------------------------------
	//Times how long you are in the state for
	//---------------------------------------------------------------------------------------
	time = 0;
}
//---------------------------------------------------------------------------------------
Splash::~Splash()
{
	
	delete sprite2;
	delete sprite1;
}
//---------------------------------------------------------------------------------------
void Splash::OnEnter(){} //LEFT BLANK
//---------------------------------------------------------------------------------------
void Splash::OnUpdate(float DeltaTime, StateMachine* state)
{
	Input* input = Input::getInstance();
	//---------------------------------------------------------------------------------------
	//Changes the opacity of the sprites
	//---------------------------------------------------------------------------------------
	x += DeltaTime / 1.5f;
	
	//---------------------------------------------------------------------------------------
	//Once 2.5 seconds has elapsed, the state will change to splash2
	//---------------------------------------------------------------------------------------
	time += DeltaTime;
	if (time >= 2.5)
		state->PushState(1);
}
//---------------------------------------------------------------------------------------
void Splash::OnDraw(Renderer2D* m_2dRenderer)
{
	//---------------------------------------------------------------------------------------
	//Sets the opacity of the sprites to be drawn, and then draws them
	//---------------------------------------------------------------------------------------
	m_2dRenderer->setRenderColour(1, 1, 1, x);
	m_2dRenderer->drawSprite(sprite1, 700, 400);
	m_2dRenderer->drawSprite(sprite2, 700, 340);
}
//---------------------------------------------------------------------------------------
void Splash::OnExit(){}
#include "Splash2.h"
#include "Texture.h"
#include "Input.h"
#include "StateMachine.h"
#include <assert.h>
//---------------------------------------------------------------------------------------
Splash2::Splash2()
{
	//---------------------------------------------------------------------------------------
	//Creates the sprite for the splash2 state 
	//And asserts to ensure it is created successfully
	//---------------------------------------------------------------------------------------
	joel = new Texture("./textures/joel.png");
	assert(joel);

	//---------------------------------------------------------------------------------------
	//Variable to set the opacity of the sprite
	//---------------------------------------------------------------------------------------
	x = 0;

	//---------------------------------------------------------------------------------------
	//Times how long you are in the state for
	//---------------------------------------------------------------------------------------
	time = 0;
}
//---------------------------------------------------------------------------------------
Splash2::~Splash2()
{
	delete joel;
}
//---------------------------------------------------------------------------------------
void Splash2::OnEnter(){}
//---------------------------------------------------------------------------------------
void Splash2::OnUpdate(float DeltaTime, StateMachine * state)
{
	Input* input = Input::getInstance();
	//---------------------------------------------------------------------------------------
	//Changes the opacity of the sprites
	//---------------------------------------------------------------------------------------
	x += DeltaTime / 1.5f;
	//---------------------------------------------------------------------------------------
	//Once 2.5 seconds has elapsed, the state will change to loading
	//---------------------------------------------------------------------------------------
	time += DeltaTime;
	if (time >= 2.5)
		state->PushState(2);
}
//---------------------------------------------------------------------------------------
void Splash2::OnDraw(Renderer2D * m_2dRenderer)
{
	//---------------------------------------------------------------------------------------
	//Sets the opacity of the sprites to be drawn, and then draws them
	//---------------------------------------------------------------------------------------
	m_2dRenderer->setRenderColour(1, 1, 1, x);
	m_2dRenderer->drawSprite(joel, 700, 360);
}
//---------------------------------------------------------------------------------------
void Splash2::OnExit(){}